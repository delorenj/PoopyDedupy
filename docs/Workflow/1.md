# Parent

None

# Children

2.md

# Tool

ChatGPT (o1-preview)

# Goal
Define the project scope and objectives.

# Prompt
```text
I need help formalizing my utility script into a set of requirements and acceptance criteria. Here is an overview of PooperDeduper:

A python script to help me identify duplicate files in a directory tree and automatically resolve by intelligently deleting the older ones and/or intelligently merging nearly-duplicate files.  The primary use case is vault maintenance required when multiple Obsidian vaults are using SyncThing to keep parity across many devices
```

# Output
```markdown
Certainly! Below is a formalized set of requirements and acceptance criteria for your utility script, **PooperDeduper**.

---

## **Functional Requirements**

### **1. Duplicate File Identification**

- **1.1** The script shall recursively scan a specified directory tree to identify duplicate files.
- **1.2** It shall compare files based on content, not just file names.
- **1.3** The script shall detect files with identical content but different names.
- **1.4** It shall identify nearly-duplicate files (e.g., files with minor textual differences).
- **1.5** The script shall handle various file types used within Obsidian vaults (e.g., Markdown files, images).

### **2. Duplicate File Resolution**

- **2.1** The script shall intelligently delete older duplicate files, retaining the most recent versions.
- **2.2** It shall provide options for user-defined rules to resolve duplicates (e.g., based on modification date, file size).
- **2.3** The script shall intelligently merge nearly-duplicate files, combining their content where appropriate.
- **2.4** It shall preserve the directory structure unless otherwise specified by the user.
- **2.5** The script shall handle conflict files generated by SyncThing (e.g., files with names like `filename.sync-conflict-YYYYMMDD-HHMMSS`).

### **3. User Interaction and Preview**

- **3.1** The script shall offer a preview mode that displays proposed actions without making changes.
- **3.2** It shall allow users to confirm or cancel actions before execution.
- **3.3** The script shall accept command-line arguments or configuration files for user preferences.
- **3.4** It shall provide clear and descriptive prompts and messages to guide the user.

### **4. Logging and Reporting**

- **4.1** The script shall log all actions taken, including files deleted, merged, or modified.
- **4.2** Logs shall include timestamps, file paths, and relevant metadata.
- **4.3** It shall generate a summary report upon completion, detailing the number of files scanned, duplicates found, and actions performed.
- **4.4** The script shall handle log file creation and rotation to prevent excessive disk usage.

### **5. Error Handling**

- **5.1** The script shall handle exceptions gracefully, providing informative error messages without crashing.
- **5.2** It shall log errors encountered during execution and continue processing remaining files where possible.
- **5.3** The script shall validate input parameters and configurations before execution.

### **6. Compatibility and Environment**

- **6.1** The script shall be compatible with file systems used by Obsidian vaults and SyncThing on Windows, macOS, and Linux.
- **6.2** It shall support Unicode characters in file names and paths.
- **6.3** The script shall be executable with Python 3.x.

---

## **Non-Functional Requirements**

### **1. Performance**

- **1.1** The script shall efficiently process large vaults containing up to 10,000 files within a reasonable time frame (e.g., under 30 minutes).
- **1.2** It shall utilize system resources optimally without causing significant slowdowns.

### **2. Security**

- **2.1** The script shall not transmit any file contents or metadata outside the user's system.
- **2.2** It shall respect file permissions and not attempt to access unauthorized files.
- **2.3** The script shall not introduce or execute malicious code.

### **3. Usability**

- **3.1** The script shall be user-friendly, requiring minimal technical expertise to operate.
- **3.2** It shall include help documentation accessible via a `--help` command-line option.
- **3.3** Default settings shall be sensible for typical use cases, reducing the need for extensive configuration.

### **4. Maintainability**

- **4.1** The script's code shall be well-documented, with clear comments and logical structure.
- **4.2** It shall follow Python best practices and coding standards (PEP 8 compliance).
- **4.3** The script shall be modular to facilitate future enhancements and debugging.

---

## **Acceptance Criteria**

### **1. Duplicate File Identification**

- **1.1** When scanning a test directory with known duplicate files (identical content), the script identifies all duplicates regardless of file names.
- **1.2** The script correctly identifies nearly-duplicate files that differ by minor content changes.
- **1.3** It handles various file types commonly used in Obsidian vaults.

### **2. Duplicate File Resolution**

- **2.1** By default, the script deletes older duplicates, preserving the most recent versions.
- **2.2** When provided with user-defined rules, it resolves duplicates according to those specifications.
- **2.3** The script successfully merges nearly-duplicate files, combining their content intelligently without data loss.
- **2.4** It correctly processes SyncThing conflict files, resolving them per user preferences.

### **3. User Interaction and Preview**

- **3.1** In preview mode, the script displays a list of proposed actions without altering any files.
- **3.2** The user is prompted to confirm actions before execution when interactive mode is enabled.
- **3.3** Command-line arguments and configuration settings are correctly parsed and applied.
- **3.4** All user messages and prompts are clear, concise, and free of technical jargon.

### **4. Logging and Reporting**

- **4.1** After execution, a log file is created, detailing all actions taken with timestamps and file metadata.
- **4.2** The summary report accurately reflects the number of files scanned, duplicates found, files deleted, and files merged.
- **4.3** Log files do not grow indefinitely; old logs are archived or rotated as per the logging policy.

### **5. Error Handling**

- **5.1** If the script encounters inaccessible files due to permission issues, it logs the errors and continues processing other files.
- **5.2** The script does not crash or halt unexpectedly when facing unexpected file types or corrupted files.
- **5.3** All exceptions are caught and handled gracefully, providing informative messages to the user.

### **6. Compatibility and Environment**

- **6.1** The script runs successfully on Windows, macOS, and Linux environments with Python 3.x installed.
- **6.2** It correctly handles files and directories with Unicode and special characters in their names.
- **6.3** The script operates correctly on various file systems (e.g., NTFS, HFS+, ext4).

### **7. Performance**

- **7.1** In testing with a vault containing 10,000 files totaling 5 GB, the script completes processing within 30 minutes.
- **7.2** The script's resource utilization (CPU, memory) remains within acceptable limits, not exceeding 50% of system capacity on average.

### **8. Security**

- **8.1** Code review confirms that the script does not contain any calls to external services or endpoints.
- **8.2** The script operates within the user's permissions and does not attempt to access or modify unauthorized files.

### **9. Usability**

- **9.1** Users can successfully run the script with default settings and achieve duplicate resolution without errors.
- **9.2** The `--help` option displays comprehensive usage instructions and examples.
- **9.3** Feedback from beta testers indicates that the script is intuitive and user-friendly.

### **10. Maintainability**

- **10.1** Code review confirms adherence to PEP 8 standards and Python best practices.
- **10.2** The codebase is modular, with functions and classes logically organized.
- **10.3** Inline comments and documentation strings (`docstrings`) are present and informative.
- **10.4** A developer can modify or extend the script's functionality without significant refactoring.

---

By adhering to these requirements and acceptance criteria, **PooperDeduper** will effectively assist in maintaining Obsidian vaults synchronized across multiple devices using SyncThing. The script will intelligently identify and resolve duplicate files, ensuring data integrity and consistency across your devices.

If you have any specific preferences or additional features you'd like to include, please let me know, and I can adjust the requirements accordingly.
```
## Acceptance Criteria

